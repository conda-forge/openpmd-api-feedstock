From 4143acbe3a092678d6b39bb08c35372a09d193b4 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Franz=20P=C3=B6schel?= <franz.poeschel@gmail.com>
Date: Fri, 23 Jan 2026 18:04:49 +0100
Subject: [PATCH] Fix instantiations for AttributeWithShapeAndResource

---
 src/IO/ADIOS/ADIOS2PreloadAttributes.cpp | 15 +++------------
 1 file changed, 3 insertions(+), 12 deletions(-)

diff --git a/src/IO/ADIOS/ADIOS2PreloadAttributes.cpp b/src/IO/ADIOS/ADIOS2PreloadAttributes.cpp
index c3c2fbfbd7..2b9bb02c2d 100644
--- a/src/IO/ADIOS/ADIOS2PreloadAttributes.cpp
+++ b/src/IO/ADIOS/ADIOS2PreloadAttributes.cpp
@@ -330,22 +330,13 @@ AttributeWithShapeAndResource<T>::operator bool() const
 }
 
 #define OPENPMD_INSTANTIATE_GETATTRIBUTE(type)                                 \
+    template struct AttributeWithShape<type>;                                  \
+    template struct AttributeWithShapeAndResource<type>;                       \
     template AttributeWithShape<type> PreloadAdiosAttributes::getAttribute(    \
         std::string const &name) const;                                        \
     template auto AdiosAttributes::getAttribute(                               \
         size_t step, adios2::IO &IO, std::string const &name) const            \
-        -> AttributeWithShapeAndResource<type>;                                \
-    template AttributeWithShapeAndResource<                                    \
-        type>::AttributeWithShapeAndResource(AttributeWithShape<type> parent); \
-    template AttributeWithShapeAndResource<type>::                             \
-        AttributeWithShapeAndResource(                                         \
-            size_t len_in,                                                     \
-            type const                                                         \
-                *data_in, /* NOLINTNEXTLINE(bugprone-macro-parentheses)  */    \
-            std::optional<std::vector<type>> resource_in);                     \
-    template AttributeWithShapeAndResource<                                    \
-        type>::AttributeWithShapeAndResource(adios2::Attribute<type> attr);    \
-    template AttributeWithShapeAndResource<type>::operator bool() const;
+        -> AttributeWithShapeAndResource<type>;
 ADIOS2_FOREACH_TYPE_1ARG(OPENPMD_INSTANTIATE_GETATTRIBUTE)
 #undef OPENPMD_INSTANTIATE_GETATTRIBUTE
 } // namespace openPMD::detail
